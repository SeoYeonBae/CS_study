## 📌 0. 개요

- 혼잡 상황이 발생하면 네트워크 자원이 낭비되므로 혼잡 상황을 최소화 하기 위한 기법
- 흐름 제어 : 송신측과 수신측의 데이터 처리 속도 차이를 해결하기 위한 기법, 송신측의 데이터 전송량 제어
- 혼잡 제어 : 송신측의 데이터 전달과 네트워크 상의 데이터 처리 속도 차이를 해결하기 위한 기법, 송신측의 데이터 전송 속도 제어


## ✨ 1. 흐름 제어 : 송신측 전송량 제어

### 1️⃣ Stop and wait 방식

- 매번 전송한 패킷에 대해 확인 응답을 받아야만 그 다음 패킷을 전손하는 방법
- ![image](https://user-images.githubusercontent.com/101535851/218459911-7c67bb2d-2b9c-4b8a-913d-55356c59d3a2.png)

### 2️⃣ Sliding Window 슬라이딩 윈도우 기법

- 송신측에서 확인응답이 오지 않아도 수신측에서 설정한 윈도우 크기만큼 세그먼트를 전송할 수 있게 하여 데이터 흐름을 동적으로 조절하는 제어 기법
- 윈도우에 포함되는 모든 패킷을 전송하고 패킷의 전달이 확인되는대로 윈도우를 옆으로 옮김으로써 다음 패킷을 전송
- ![image](https://user-images.githubusercontent.com/101535851/218461261-82ad66c1-34c1-46db-b1a4-d3cca7edc617.png)

## ✨ 2. 혼잡 제어 : 송신측 데이터 전송 속도 제어

### 0️⃣ 개요

- 송신측의 데이터는 지역망이나 인터넷으로 연결된 대형 네트워크를 통해 전달
- 한 라우터에 데이터가 몰릴 경우 자신에게 온 데이터를 모두 처리할 수 없음
- 이런 경우 호스트는 다시 데이터를 전송함
- 결국 혼잡만 가중시켜 오버플로우나 데이터 손실을 발생
- 이러한 네트워크 혼잡을 피하기 위해 송신측에서 보내는 데이터의 전송 속도를 강제로 줄이는 것!

### 1️⃣ AIMD (Additive Increase Multicative Decrease) : 눈치 작전

- 처음에 하나를 보내고 문제 없이 도착하면 윈도우 크기를 1씩 증가시키며 전송
- 패킷 전송을 실패하거나 타임아웃이 발생하면 윈도우 크기를 절반으로 감소
- 문제점

  - 초기 네트워크의 높은 대역폭을 사용하지 못 함
  - 처음 전송 속도를 올리는데 시간이 너무 오래 걸림
  - 네트워크가 혼잡해지는 상황을 미리 감지하지 못하고 혼잡해지면 그때 대역폭을 줄임

### 2️⃣ Slow start

- 하나의 패킷이 문제없이 도착하면 윈도우 크기를 1씩 증가하면서 전송
- 한 주기가 지나면 윈도우 크기를 2배로 늘림
- 혼잡 현상이 발생하면 윈도우 크기를 1로 떨어트림
- ![image](https://user-images.githubusercontent.com/101535851/218464255-c5c15922-d6a5-47b2-afa9-09e769400e0c.png)

### 3️⃣ Fast Retransmit (빠른 재전송)

- 먼저 도착해야 할 패킷이 도착하지 않고 다음 패킷이 도착한 경우에도 응답 패킷을 보냄
- 순서대로 잘 도착한 마지막 패킷의 다음 패킷 순번을 응답 패킷에 실어보내게 되므로 송신측에서는 순번이 중복된 것을 알게됨
- 이것을 감지해 중복된 순번의 패킷을 3개 받으면 타임아웃 전에 문제가 되는 순번의 패킷을 즉시 재전송해줌
- 이런 현상이 일어나면 혼잡 현상이 발생한 것이므로 윈도우 크기를 줄임
- ![image](https://user-images.githubusercontent.com/101535851/218466810-98f1cf62-8d96-49a0-93c9-cea7d9870334.png)

### 4️⃣ Fast Recovery (빠른 회복)

- 혼잡 상태가 되면 윈도우 크기를 1로 줄이지 않고 반으로 줄이고 선형증가시키는 방법
- 혼잡 상황을 한 번 겪고 나서부터는 순수한 AIMD 방식으로 동작

---

###### 참고

- [TCP/IP (흐름제어/혼잡제어)](https://gyoogle.dev/blog/computer-science/network/%ED%9D%90%EB%A6%84%EC%A0%9C%EC%96%B4%20&%20%ED%98%BC%EC%9E%A1%EC%A0%9C%EC%96%B4.html)
- [[Network] TCP/IP 흐름제어 & 혼잡제어](https://doh-an.tistory.com/29)
- [Fast Retransmit](https://www.sciencedirect.com/topics/computer-science/fast-retransmit)
