# 📌메모리(Memory)


## 1.메모리 구조

### 💻 메모리의 계층 구조

메모리를 필요에 따라 **속도, 용량, 성능에 따라** 계층적으로 나누어 둔 것


![image](https://user-images.githubusercontent.com/63834758/209699844-1152216f-e537-4c18-86ce-039991cbd15d.png)



### 💻 메모리의 계층 특징

> **하위계층** 으로 갈수록 용량 ⬆ , 가격 ⬇ / 속도 ⬇
> 
> **상위계층** 으로 갈수록 용량 ⬇ , 가격 ⬆ / 속도 ⬆ 
> 
> 
> 이를 보완하기 위해 메모리 계층 구조를 사용,
> 
>  즉 서로 다른 여러 종류의 저장 장치를 함께 사용해 최적의 효율을 낸다.

<br><br>


## 2. 보조 기억 장치

✔️ 물리적인 디스크가 연결되어 있는 기억장치.

✔️주기억장치보다는 느리지만, 컴퓨터의 전원을 꺼도 저장된 데이터가 사라지지 않고, 영구 보관 가능

<br>

### 📎 HDD(Hard Disk Driver)

<img src="https://user-images.githubusercontent.com/63834758/209742465-1ed4fd4e-1417-4469-aa7b-2b84d72b0063.png" width=50% height=50%>

- 하드디스크라 불리우는 보조기억장치
- 물리적인 디스크를 고속으로 회전시켜 데이터를 저장
- 디스크에 물리적으로 저장하기 때문에 충격에 약하며, 소음이 다소 발생
- 크기가 작고 처리속도가 향상된 SSD가 나오기 전까지는 대중적이었다.

<br>

### 📎 SSD(Solid State Driver)

<img src="https://user-images.githubusercontent.com/63834758/209742840-7b1812d5-115b-4e7f-9455-76f515f4d458.png" width=50% height=50%>

- 반도체 기반의 정보를 저장하는 보조기억장치
- 물리적이 아닌 전기적으로 데이터를 저장하기 때문에 HDD에 비해서 속도가 월등히 빠르고, 소음도 없다. 
- 전력소모가 적고, 경량화 및 소형화 가능. 
- HDD에 비해서는 가격이 높다.


<br>
<br>


## 3. 주 기억 장치

✔️컴퓨터 내부에서 현재 CPU가 처리하고 있는 내용을 저장하고 있는 기억장치. 

✔️즉, CPU의 명령에 의해 기억된 장소에 직접 접근하여 읽고 쓸 수 있다. 

<br>

### 📎 **RAM(Random Access Memory)**

- 읽기 및 쓰기 가능, 응용 프로그램, 운영체제 등을 불러와 CPU가 작업할 수 있도록 하는 기억장치

- 데이터를 읽는 속도 = 기록하는 속도

- 프로그램 로딩 또는 데이터를 임시 저장할 때 사용된다.

- 휘발성 메모리(Volatile Memory). 따라서 실행하고 있는 파일은 항상 보조기억장치에 저장을 해줘야 한다.


<br>

### 📎 **ROM(Read Only Memory)**

- 비휘발성 메모리(Non-Volatile Memory). 기억된 데이터를 읽는 것만 가능하다.

- 데이터 저장 후 반영구적으로 사용할 수 있다.

<br><br>


## 3. 주 기억장치의 구조


### 📎 코드(Code) 영역

실행할 프로그램의 코드가 저장되는 영역. 텍스트 영역이라고도 부른다. 

CPU는 코드 영역에 저장된 명령어를 하나씩 가져가서 처리한다.

<br>

### 📎 데이터(Date) 영역

프로그램이 동작하는 전반에 걸쳐 사용되는 데이터를 저장하는 공간.

프로그램의 시작과 동시에 할당되고, 프로그램이 종료되면 소멸한다. 

전역변수(Global Variable), 정적변수(Static Variable), 배열(Array), 구조체(Structure) 등이 저장된다.



<br>

### 📎 힙(Heap) 영역

사용자가 직접 관리할 수 있는 메모리 영역. 

메모리 주소 값에 의해서만 참조되고 사용되며, 참고타입(Reference Type)에 대한 저장 공간이다.


<br>

### 📎 스택(Stack) 영역

함수의 호출과 관계되는 지역 변수, 매개변수, 메소드, return값 등이 저장되는 영역.

프로그램이 자동으로 사용하는 임시 메모리 영역이기 때문에 함수의 호출과 함께 할당되며, 함수의 호출이 완료되면 소멸한다. 

이렇게 스택 영역에 저장되는 함수의 호출 정보를 스택 프레임(Stack Frame)이라고 한다.

- 힙과 스택은 사실 같은 공간을 공유하지만 시작지점이 다르다.
- 스택 영역은 푸시(Push) 동작으로 데이터를 저장하고, 팝(Pop)동작으로 데이터를 인출한다.

<br>

### 💻 스택(Stack) vs 힙(Heap) 영역

- **Heap** : 힙은 메모리 위쪽 주소부터 할당(낮은 주소→높은주소)한다.

- **Stack** : 스택은 메모리 아래쪽부터 할당(높은 주소→낮은 주소)한다.

- **Stack/Heap Overflow** : 이렇게 서로 다른 시작점에서 할당되다가 서로 겹치는 것을 Stack/Heap Overflow라고 한다.



<br><br>

## 4. 캐시 메모리

✔️ CPU의 처리속도와 주기억장치의 접근 속도 차이를 줄이기 위해 사용하는 고속 Buffer Memory


### 💻 특징

- CPU가 주기억장치에서 저장된 데이터를 읽어 올때, 자주 사용하는 데이터를 캐시 메모리에 저장한 뒤 다음 이용할 때 메모리에서 먼저 가져오면서 속도를 향상시킨다.
- 처리속도가 거의 CPU의 속도와 비슷하다.
- 캐시메모리를 사용하면 주 기억장치를 접근하는 횟수가 줄어들어 컴퓨터의 처리속도가 향상된다.

<br>

### 💻 작동 원리

캐시가 효율적으로 동작하려면, 캐시에 저장할 데이터가 지역성을 가져야 한다. 

즉, 데이터 접근이 시간적 혹은 공간적으로 가깝게 일어나야 한다.

<br>

- **시간 지역성** : 특정 데이터가 한번 접근되었을 경우, 가까운 미래에 또 한번 데이터에 접근할 가능성이 높다. 
    - ex) For, while 반복문에 사용되는 데이터는 참조 가능성이 높으므로 다시 저장한다.

- **공간 지역성** : 액세스된 기억장소와 인접한 기억장소가 액세스될 가능성이 높다. 
    - ex) 배열에서 같은 연속 접근시, 참조된 데이터 근처에 있는 데이터가 참조 가능성이 높으므로 저장한다.
     
<br>

### 💻 캐시 미스(Cache Miss)

CPU가 요청한 데이터가 캐시에 있으면 **Cache Hit** 라고 하며, 

반대로 없어서 주기억장치에서 가져오게되면 **Cache Miss** 라고 한다.

- **Cold Miss** : 해당 메모리 주소를 처음 불러서 나는 miss
- **Conflict Miss** : A와 B를 저장해야 하는데, A와 B가 같은 주소에 할당되어 있는 경우 나는 miss
- **Capacity Miss** : 공간이 부족해서 나는 miss

<br>

## 5. 레지스터

✔️ CPU가 요청을 처리하는데 필요한 데이터를 일시적으로 저장하는 다목적 공간

✔️ 프로세스 내부에 있는 작은 공간으로 연산 제어, 디버깅 등등의 목적으로 사용

### 💻 특징

- 레지스터는 공간은 작고 가격은 비싸지만, CPU에 직접 연결되어 있어서 연산 속도가 RAM, HDD, SDD보다 빠르다.
- CPU는 자체적으로 데이터를 저장할 수 없으므로, 레지스터를 이용하여 연산처리 및 번지 지정을 돕는다.


### 💻 레지스터와 캐시의 차이점

- **캐시** : CPU와 별도로 있는 공간이며, 메인 메모리와 CPU간의 속도 차이를 극복하기 위한 것
- **레지스터** : CPU안에서 연산을 처리하기 위하여 데이터를 저장하는 공간




### 💻 레지스터와 캐시의 공통점

어떤 명령어나 데이터를 저장해두는 저장 공간이다.




<hr>

### 참고

- [[OS] 메모리 계층 구조(Memory Hierachy)](https://velog.io/@yu-jin-song/CS-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B3%84%EC%B8%B5-%EA%B5%AC%EC%A1%B0)
- [CS 메모리 구조](https://velog.io/@alicesykim95/CS-Memory-%EA%B5%AC%EC%A1%B0)
- [[CS] 메모리](https://artsung410.tistory.com/94)
