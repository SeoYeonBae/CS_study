# 📁 파일 시스템


## 📂 0. 파일 (File)

- 논리적인 저장 단위
- 관련된 정보 자료들의 집합에 이름을 붙인 것


## 📂 1. 파일시스템 (File System)

### 1️⃣ 개념

  - 저장 매체에는 수많은 파일 존재 -> 이 파일을 쉽게 발견 할 수 있도록 유지 및 관리하는 방법

### 2️⃣ 특징

  - 커널 영역에서 동작
  - 파일의 CRUD 기능을 원활히 수행하기 위한 목적
  - 계층적 디렉토리 구조

### 3️⃣ 역할

  - 파일 관리
  - 보조저장소 관리
  - 파일 무결성 메커니즘
  - 접근 방법 제공

### 4️⃣ 개발 목적

  - 하드 디스크와 메인 메모리 속도차를 줄이기 위함
  - 파일 관리
  - 하드 디스크 용량 효율적 이용

### 5️⃣ 구조

  - 메타 영역 : 데이터 영역에 기록된 파일의 이름, 위치, 크기, 시간정보, 삭제유무 등의 파일 정보
  - 데이터 영역 : 파일의 데이터


## 📂 2. 파일 정보 접근 방법 (Access Methods)

### 1️⃣ 순차 접근(Sequential Access) - 카세트 테이프

- 가장 단순한 방법
- 파일의 정보가 레코드 순서대로 처리
- 카세트 테이프를 사용하는 방식과 동일
- 현재 위치에서 읽거나 쓰면 offset이 자동으로 증가하고, 뒤로 돌아가기 위해선 되감기가 필요

![image](https://user-images.githubusercontent.com/101535851/209497658-749d0d2e-f09d-4a6f-a8b7-635a6b81e310.png)


### 2️⃣ 직접 접근(Random Access) - LP

- 파일의 레코드를 임의의 순서로 접근 가능
- LP 판을 사용하는 방식과 동일 
- 읽기나 쓰기의 순서에 제약이 없으며 현재 위치를 유지할 수 있다면 이를 통해 순차 접근 기능도 구현 가능
- 대규모 정보 접근에 유용해 데이터베이스에 활용

### 3️⃣ 색인 접근(Index Access)

- 크기가 큰 파일을 입출력 탐색할 수 있게 도와주는 방법
- 색인을 먼저 찾고 대응되는 포인터를 찾아 데이터를 얻음

![image](https://user-images.githubusercontent.com/101535851/209497789-acb00d26-e8d7-4542-be40-fdc2c2bf9a6c.png)


## 📂 3. 디렉토리 (Directory)

### 1️⃣ 개념

  - 파일의 메타데이터 중 일부를 보관하고 있는 일종의 특별한 파일
  - 파일의 찾기, 생성, 삭제, 재명명, 시스템 순회와 디렉토리 나열 기능을 제공

### 2️⃣ 구성

  - 파일을 빠르게 탐색할 수 있고 사용자들이 사용하기 편리한 이름으로 구성
  - 적절한 분류로 그룹화하면 편할 것
  - 이를 위해 디렉토리의 논리적 구조를 정의하는 여러 방법이 존재

### 3️⃣ 구조

#### 1. 1단계 디렉토리(Single-Level Directory)

- 모든 파일이 디렉토리 밑에 존재하는 형태
- 파일은 서로 유일한 이름을 가지고 다른 사용자라도 같은 이름을 사용할 수 없음
- 파일이 많아지거나 다수의 사용자가 사용하면 심각한 제약 발생

![image](https://user-images.githubusercontent.com/101535851/209498990-e09242a2-c2af-4e14-963b-463404a2c357.png)

### 2. 2단계 디렉터리(Two-Level Directory)

- 각 사용자별로 별도의 디렉토리를 갖는 형태
- 다른 사용자가 같은 이름의 파일을 가질 수 있고 효율적인 탐색 가능
- 그러나, 그룹화가 불가능하고 다른 사용자 파일에 접근할 경우 단점이 됨

![image](https://user-images.githubusercontent.com/101535851/209499219-11d4164d-61b9-4a7d-9a28-7b13ec4de8f0.png)

- UFD : 자신만의 사용자 파일 디렉터리
- MFD : 사용자의 이름과 계정번호로 색인되어 있는 디렉터리

### 3. 트리 구조 디렉터리(Tree-Structured Directory)

- 사용자들이 자신의 서브 디렉토리를 만들어서 파일을 구성
- 하나의 루트 디렉토리를 가지며 모든 파일은 고유한 경로(절대, 상대)를 가짐
- 효율적인 탐색이 가능하고 그룹화 가능
- 디렉토리 또한 일종의 파일이기 때문에 일반 파일과 디렉토리의 구분은 bit를 사용, 0이면 일반 1이면 디렉토리

![image](https://user-images.githubusercontent.com/101535851/209499460-c22c41b2-1a07-4c3b-8839-c48a4f427f11.png)

### 4. 비순환 그래프 디렉터리(Acyclic-Graph Directory)

- 디렉토리들이 서브 디렉토리들과 파일을 공유함
- 단순 트리 구조보다는 복잡한 구조

- 파일 삭제

  - 파일을 무작정 삭제 -> 포인터의 대상이 사라짐
  - 파일에 참조 계수를 둠, 참조 계수가 0이 됨 -> 파일을 참조하는 링크가 존재하지 않는다는 의미 -> 파일 삭제

![image](https://user-images.githubusercontent.com/101535851/209499567-3322339a-318d-4c15-98bb-47fdf88a61ff.png)

### 5. 일반 그래프 디렉터리(General Graph Directory)

- 순환을 허용하는 그래프 구조
- 무한 루프에 빠질 가능성이 있음
- 따라서, 하위 디렉토리가 아닌 파일에 대한 링크만 허용하거나 garbage collection을 통해 전체 파일 시스템을 순회하고, 접근 가능한 모든 것을 표시

![image](https://user-images.githubusercontent.com/101535851/209499641-60ce3e17-0fc9-4892-952f-eca8e4fc0e3b.png)

---

#### 참고

- [[운영체제(OS)] 11. 파일 시스템(File System)](https://rebro.kr/181)
- [파일 시스템(File System)](https://gyoogle.dev/blog/computer-science/operating-system/File%20System.html)
