## 해시 테이블(Hash Table)
![image](https://github.com/SeoYeonBae/CS_study/assets/63505110/05e9b0c1-65cb-4428-ba70-b17930f1090b)


- 원소가 저장될 자리가 원소 값에 의해 결정되는 즉, 저장된 자료와 비교하여 자리를 찾지 않고 단 한 번의 계산으로 자신의 자리를 찾는 자료구조
- 해시 함수를 사용하여 변환한 값을 색인(index)로 삼아 (Key, Value) 저장
  - 실제 값이 저장되는 장소를 버킷 또는 슬롯이라고 한다. 
- 원소의 해시 값(key)을 해시 함수로 계산하고 이 값은 해당 원소를 저장하는 주소(index)로 변환하는 과정을 해싱(Hashing)이라고 한다.
  
--------
### 🔢 해시 함수
- 키 값을 입력 받아 해시 테이블상의 주소를 리턴한다.
- 해시 함수는 다음 두 가지 성질을 가지도록 만들어야 한다.
       
  - *입력 원소가 해시 테이블 전체에 **고루** 저장되어야 한다.*
  - *계산이 간단해야 한다.*

대표적으로 **나누기 방법**과 **곱하기 방법**이 있다.

#### 1. 나누기 방법
> h(x) = x mod m
- m은 해시 테이블의 크기
  - 2의 멱수, 거듭제곱에 가깝지 않은 소수(Prime Number)를 택하는 것이 좋다.

#### 2. 곱하기 방법
> h(x) = ⌊m(xA mod 1)⌋
- x에 0 < A < 1 범위의 상수 A를 곱한 뒤 소수부만 취한다.
  - 상수 A를 어떻게 잡느냐에 따라 해시 값 분포가 많은 영향을 받는다.
- 이 값에 m을 곱하여 정수부를 취한다.

이외에 Digit Folding, Univeral Hashing 함수도 있다.
- Digit Folding: 각 Key의 문자열을 ASCII 코드로 바꾸고 값을 합한 데이터를 테이블 내의 주소로 사용하는 방법
- Universal Hashing: 다수의 해시함수를 만들어 집합 H에 넣어두고, 무작위로 해시함수를 선택해 해시값을 만드는 기법

--------
### 충돌 해결
- 해시 테이블 내의 한 주소를 놓고 두 개 이상의 원소가 자리를 다투는 것을 **충돌**이라고 한다.
- 충돌 해결(Collision Resolution)에는 크게 체이닝(Chaining)과 개방 주소 방법(Open Addressing)이 있다.
   - 해시 테이블 구조를 개선하는 것

### 체이닝 (Chaining)
![image](https://github.com/SeoYeonBae/CS_study/assets/63505110/8094ba81-ab2b-4b47-95c0-f6957ed7647e)

- 해시 테이블의 각 주소가 리스트의 헤더 역할을 하고, 여기에 해당 주소로 들어오는 원소들이 연결 리스트(Linked List)로 연결된다.
  - 같은 주소로 해싱되는 원소를 모두 하나의 연결 리스트에 매달아서 관리
  - chaining 될 때마다 추가적인 메모리가 사용된다.
- 원소를 연결 리스트에 삽입할 때 해당 리스트의 맨 앞에 삽입한다.
  - 위의 사진에서 저장된 순서는 Sandra, John
 

### 개방 주소 방법 (Open Addressing)
- 체이닝과 달리 충돌이 일어나더라도 어떻게든 주어진 테이블 공간에서 해결하는 방법이다.
- 모든 원소가 반드시 자신의 해시 값과 일치하는 주소에 저장된다는 보장이 없다.
- 해시 함수로 계산된 주소에 다른 원소가 있는 경우 빈 자리를 찾을 때까지 다음 세가지 방법 중 하나를 반복한다.

#### 선형 조사 (Linear Probing)
![image](https://github.com/SeoYeonBae/CS_study/assets/63505110/760ff0a2-d664-444d-8270-d0cedf582178)

- 가장 간단한 충돌 해결 방법으로 충돌이 일어난 index로부터 고정폭만큼 이동하여 차례대로 검색하여 비어있는 버킷에 데이터를 저장한다.
  - 바로 뒤에 있는 버킷을 검색한다.
- 테이블 경계를 넘어갈 경우 맨 앞으로 가면 된다.
- 특정 영역에 원소가 몰릴 때 성능이 치명적으로 떨어지는데 이를 클러스터링(Clustering)이라 한다.

#### 이차원 조사 (Quadratic Probing)
![image](https://github.com/SeoYeonBae/CS_study/assets/63505110/e2736f4c-eba1-4325-aeb7-2e23f64531fa)

- 선형탐사에 비해 보폭을 이차 함수로 넓혀가면서 탐사하는 방법
  -  h(x), h(x) + 1, h(x) + 4, h(x) + 9와 같이 탐사
- 선형 조사에 비해 특정 영역에 원소가 몰려도 해당 영역을 빨리 벗어날 수 있다.
- 그러나 여러 개의 원소가 동일한 초기 해시 함수 값을 갖게 되면 역시나 클러스터링 문제가 발생한다.


#### 더블 해싱 (Double Hashing)
- 해시된 값을 한 번 더 해싱하여 해시의 규칙성을 없애 클러스터링을 방지하는 방법
  - 해시된 값을 한 번 더 해싱하여 새로운 주소를 할당하기에 다른 방법들보다 많은 연산을 하게 된다.
- 두 개의 서로 다른 해시 함수를 사용
  - 첫 번째 해시 함수는 해시값을 찾기 위해 사용
  - 두 번쨰 해시 함수는 충돌이 발생했을 때 탐사폭을 계산하기 위해 사용

-------
### ⏱ 시간 복잡도
- 저장된 자료의 양에 상관없이 원소 하나를 저장, 검색, 삭제하는 데 항상 상수 시간 소요
- 평균 : `O(1)`
  - 각각의 key값은 해시함수에 의해 고유 index를 가지기에 데이터에 바로 접근할 수 있다.
- 최약 : `O(N)`
  - 충돌이 발생했을 경우 Chaining에 연결된 연결리스트들을 검색해야 한다.
### 참고
- [[DS] 해쉬 테이블(Hash Table)이란?](https://baeharam.netlify.app/posts/data%20structure/hash-table)
- [[자료구조] 해시 테이블(Hash Table) 이란? , 해시 알고리즘 , 해시 함수](https://code-lab1.tistory.com/14)
